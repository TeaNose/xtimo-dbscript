/**
 * API Log per Device Application
 * - request_id : Request ID generated by Device to connect api_device_log with app_device_log (GPS Tracking)
 * - device_utc : UTC Time on Device
 * - device_datetime : convert device_utc into yyyymmddHHMMSS
 * - data_category : INPUT / OUTPUT
 * - success : Y/N
 */
CREATE TABLE xtimo_api_device_log
(
  xtimo_api_device_log_id bigint NOT NULL AUTO_INCREMENT,
  xtimo_device_app_id bigint NOT NULL,
  xtimo_api_id bigint NOT NULL,
  request_id varchar(100) NOT NULL,
  server_datetime varchar(14) NOT NULL,
  device_utc bigint NOT NULL,
  device_datetime varchar (14) NOT NULL,
  data_category varchar(10) NOT NULL,
  data_json TEXT,
  success varchar(1) NOT NULL,
  version bigint NOT NULL,
  primary key (xtimo_api_device_log_id)
);

CREATE UNIQUE INDEX xtimo_api_device_log_index_01
	ON xtimo_api_device_log
	(xtimo_device_app_id, xtimo_api_id, request_id, data_category);